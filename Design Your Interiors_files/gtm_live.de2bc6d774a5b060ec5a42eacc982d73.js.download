function ZFGTMUtil(){this.gtmJSON={}}var GTM={CATEGORY:"Zoho Forms",FORM_SUBMIT:"Submit Form",FORM_SUBMIT_EVT:"zf_submitform",FIELD_ONCLK:"Onclick Field",FIELD_ONCLK_EVT:"zf_onclickfield",PAGE_VIEW:"Page View",PAGE_VIEW_EVT:"zf_pageview",SAVE_FORM:"Save Form",SAVE_FORM_EVT:"zf_saveform",REVIEW_FORM:"Review Form",REVIEW_FORM_EVT:"zf_reviewform",FORM_VIEW_EVT:"zf_formview",FORM_VIEW:"Form View",FORM_ALIAS:"form_alias",FIELDS:"fields",PAGES:"pages",FORM_VIEW_KEY:"form_view",FORM_REVIEW_KEY:"form_review",FORM_SAVE_KEY:"form_save",FORM_SUBMIT_KEY:"form_submit"};function bindFieldstoEvt(liElem,fieldLinkName,compType){if(!$(liElem).hasOwnProperty("isvisible")||"true"==$(liElem).attr("isvisible"))if($(liElem).hasClass("fieldDisabled"))compType==ZFFieldTypeConstants.ADDRESS&&$(liElem).on("click","a[elname=mapLink]",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.SINGLE_LINE||compType==ZFFieldTypeConstants.EMAIL||compType==ZFFieldTypeConstants.WEBSITE||compType==ZFFieldTypeConstants.PHONE||compType==ZFFieldTypeConstants.NUMBER||compType==ZFFieldTypeConstants.CURRENCY||compType==ZFFieldTypeConstants.DECIMAL||compType==ZFFieldTypeConstants.DATETIME||compType==ZFFieldTypeConstants.DATE)$(liElem).on("focus","input",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.MULTI_LINE)$(liElem).on("focus","textarea",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.RATING)$(liElem).on("click","a,span",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.SLIDER)$(liElem).find("a").parent().on("slidestop",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.RADIO||compType==ZFFieldTypeConstants.CHECKBOX||compType==ZFFieldTypeConstants.DECISION_BOX||compType==ZFFieldTypeConstants.TERMS_CONDITIONS)$(liElem).on("change","input",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.NAME||compType==ZFFieldTypeConstants.ADDRESS)$(liElem).on("change","select",function(){pushToGTM(this)}),$(liElem).on("focus","input",function(){pushToGTM(this)}),$(liElem).on("click","a[elname=mapLink]",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.TIME||compType==ZFFieldTypeConstants.DROPDOWN||compType==ZFFieldTypeConstants.MULTIPLE_CHOICE)$(liElem).on("change","select",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.IMAGE_CHOICE){if("imagePicker"==(choiceType=liElem.find("div[elname=imageChoiceEle]").attr("choicetype"))||isOneFieldForm()){var divEle=liElem.find("div[elname=choiceContDiv]");$(divEle).each(function(){$(this).find("div[name=selectDiv]").on("click",function(){pushToGTM(this)}),$(this).find("b").on("click",function(){pushToGTM(this)})})}else{var inputs=liElem.find("input");$(inputs).each(function(){var parentDiv=$(this).parent();$(this).on("click",function(){pushToGTM(this)}),$(parentDiv).find("div").on("click",function(){pushToGTM(this)}),$(parentDiv).find("b").on("click",function(){pushToGTM(this)})})}}else if(compType==ZFFieldTypeConstants.FILE_UPLOAD)$(liElem).find("input[name="+fieldLinkName+"]").on("change",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.IMAGE_UPLOAD||compType==ZFFieldTypeConstants.MEDIA_UPLOAD)$(liElem).find("input[name="+fieldLinkName+"]").on("change",function(){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.SIGNATURE)$(liElem).find("#drawingCanvas-"+fieldLinkName).on("mousedown",function(event){pushToGTM(this)});else if(compType==ZFFieldTypeConstants.MATRIX_CHOICE){var choiceType;(choiceType=$(liElem).attr("choicetype"))==MatrixChoicesType.TEXTBOX.CODE||choiceType==MatrixChoicesType.NUMBER.CODE||choiceType==MatrixChoicesType.CURRENCY.CODE?$(liElem).find("input[elname="+fieldLinkName+"]").on("focus",function(){pushToGTM(this)}):choiceType==MatrixChoicesType.DROPDOWN.CODE?$(liElem).find("select[elname="+fieldLinkName+"]").on("change",function(){pushToGTM(this)}):$(liElem).find("input[elname="+fieldLinkName+"]").on("change",function(){pushToGTM(this)})}}function pushToGTM(input){var elem=getClosestFieldElemLi(input),fieldLinkName=$(elem).attr("linkname");try{var onclickFlds=ZFGTMUtil.gtmJSON[GTM.FIELDS];typeof onclickFlds[fieldLinkName]!==ResponseKey.UNDEFINED&&window.dataLayer.push({event:GTM.FIELD_ONCLK_EVT,zf_field:onclickFlds[fieldLinkName],zf_page:"",zf_category:GTM.CATEGORY,zf_action:GTM.FIELD_ONCLK,zf_formname:ZFGTMUtil.gtmJSON[GTM.FORM_ALIAS]})}catch(e){}}function pushToGTMOnClickWithFieldLinkName(fieldLinkName){try{var onclickFlds=ZFGTMUtil.gtmJSON[GTM.FIELDS];typeof onclickFlds[fieldLinkName]!==ResponseKey.UNDEFINED&&window.dataLayer.push({event:GTM.FIELD_ONCLK_EVT,zf_field:onclickFlds[fieldLinkName],zf_page:"",zf_category:GTM.CATEGORY,zf_action:GTM.FIELD_ONCLK,zf_formname:ZFGTMUtil.gtmJSON[GTM.FORM_ALIAS]})}catch(e){}}function pushPageViewToGTM(ulFooter){var pageLinkName=$(ulFooter).attr("page_link_name");try{var pageView=ZFGTMUtil.gtmJSON[GTM.PAGES];typeof pageView[pageLinkName]!==ResponseKey.UNDEFINED&&window.dataLayer.push({event:GTM.PAGE_VIEW_EVT,zf_category:GTM.CATEGORY,zf_page:pageView[pageLinkName],zf_field:"",zf_action:GTM.PAGE_VIEW,zf_formname:ZFGTMUtil.gtmJSON[GTM.FORM_ALIAS]})}catch(e){}}function pushFormViewToGTM(){try{ZFGTMUtil.gtmJSON[GTM.FORM_VIEW_KEY]&&window.dataLayer.push({event:GTM.FORM_VIEW_EVT,zf_category:GTM.CATEGORY,zf_field:"",zf_page:"",zf_action:GTM.FORM_VIEW,zf_formname:ZFGTMUtil.gtmJSON[GTM.FORM_ALIAS]})}catch(e){}}function pushFormActionToGTM(input){try{"submit"==input&&ZFGTMUtil.gtmJSON[GTM.FORM_SUBMIT_KEY]?window.dataLayer.push({event:GTM.FORM_SUBMIT_EVT,zf_category:GTM.CATEGORY,zf_field:"",zf_page:"",zf_action:GTM.FORM_SUBMIT,zf_formname:ZFGTMUtil.gtmJSON[GTM.FORM_ALIAS]}):"save"==input&&ZFGTMUtil.gtmJSON[GTM.FORM_SAVE_KEY]?window.dataLayer.push({event:GTM.SAVE_FORM_EVT,zf_category:GTM.CATEGORY,zf_field:"",zf_page:"",zf_action:GTM.SAVE_FORM,zf_formname:ZFGTMUtil.gtmJSON[GTM.FORM_ALIAS]}):"review"==input&&ZFGTMUtil.gtmJSON[GTM.FORM_REVIEW_KEY]&&window.dataLayer.push({event:GTM.REVIEW_FORM_EVT,zf_category:GTM.CATEGORY,zf_field:"",zf_page:"",zf_action:GTM.REVIEW_FORM,zf_formname:ZFGTMUtil.gtmJSON[GTM.FORM_ALIAS]})}catch(e){}}ZFGTMUtil.prototype.bindGTMEvents=function(){var onclickFlds=ZFGTMUtil.gtmJSON[GTM.FIELDS];for(var fieldLinkName in onclickFlds){var liElem=getFieldElem(fieldLinkName);if($(liElem).length>0)bindFieldstoEvt(liElem,fieldLinkName,parseInt($(liElem).attr("comptype")))}var formDiv=$("#formDiv");$(formDiv).find("#formBodyDiv").find("ul[elname=formBodyULName]").length>1&&pushPageViewToGTM($(formDiv).find("ul[elname=footer]:visible")),pushFormViewToGTM()};